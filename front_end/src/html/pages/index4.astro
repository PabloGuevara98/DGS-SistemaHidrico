---
import Head from "@components/_head.astro";
import Footer from "@components/dashboard/_footer.astro";
import Topbar from "@components/dashboard/_topbar.astro";
import Sidenav from "@components/dashboard/_sidenav.astro";
import Scripts from "@components/_scripts.astro";

const title = "AdminLTE | Dashboard v2";
const path = "../../dist";
const mainPage = "dashboard";
const page = "index4";
---

<!doctype html>
<html lang="en">
  <head>
    <Head title={title} path={path} />
    <!-- ApexCharts CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css" integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0=" crossorigin="anonymous" />
  </head>
  <body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <div class="app-wrapper">
      <Topbar path={path} />
      <Sidenav path={path} mainPage={mainPage} page={page} />
      
      <main class="app-main">
        <div class="container-fluid">
          <h3 class="mb-0">Panel de Control de Sequía</h3>
          
          <!-- Resumen General de la Situación -->
            <!-- =========================================================== -->
            <h4 class="mt-4 mb-2">Resumen General de la Situación</h4>
<!--begin::Row-->
<div class="row">
  <div class="col-md-4 col-sm-6 col-12">
    <div class="info-box bg-success">
      <span class="info-box-icon"><i class="fas fa-water"></i></span>
      <div class="info-box-content">
        <span class="info-box-text">Estado de Sequía</span>
        <span class="info-box-number">Normal</span>
        <div class="progress">
          <div class="progress-bar" style="width: 20%"></div>
        </div>
        <span class="progress-description">
          Situación bajo control
        </span>
      </div>
    </div>
  </div>

  <div class="col-md-4 col-sm-6 col-12">
    <div class="info-box bg-warning">
      <span class="info-box-icon"><i class="fas fa-exclamation-triangle"></i></span>
      <div class="info-box-content">
        <span class="info-box-text">Estado de Sequía</span>
        <span class="info-box-number">Precaución</span>
        <div class="progress">
          <div class="progress-bar" style="width: 40%"></div>
        </div>
        <span class="progress-description">
          Niveles de agua bajos
        </span>
      </div>
    </div>
  </div>

    <div class="col-md-4 col-sm-6 col-12">
    <div class="info-box bg-orange">
      <span class="info-box-icon"><i class="fas fa-exclamation-circle"></i></span>
      <div class="info-box-content">
        <span class="info-box-text">Estado de Sequía</span>
        <span class="info-box-number">Alerta</span>
        <div class="progress">
          <div class="progress-bar" style="width: 60%"></div>
        </div>
        <span class="progress-description">
          Se requiere atención inmediata
        </span>
      </div>
    </div>
  </div>

  <div class="col-md-4 col-sm-6 col-12">
    <div class="info-box bg-danger">
      <span class="info-box-icon"><i class="fas fa-burn"></i></span>
      <div class="info-box-content">
        <span class="info-box-text">Estado de Sequía</span>
        <span class="info-box-number">Crítico</span>
        <div class="progress">
          <div class="progress-bar" style="width: 60%"></div>
        </div>
        <span class="progress-description">
          Riesgo de daños graves
        </span>
      </div>
    </div>
  </div>

  <div class="col-md-4 col-sm-6 col-12">
    <div class="info-box bg-violet">
      <span class="info-box-icon"><i class="fas fa-radiation-alt"></i></span>
      <div class="info-box-content">
        <span class="info-box-text">Estado de Sequía</span>
        <span class="info-box-number">Emergencia</span>
        <div class="progress">
          <div class="progress-bar" style="width: 80%"></div>
        </div>
        <span class="progress-description">
          Condiciones extremadamente críticas
        </span>
      </div>
    </div>

  <!-- Agregar los otros estados de sequía aquí siguiendo el mismo patrón -->
</div>
<!--end::Row-->

          
          <!-- Gráficos de Impacto -->
          <div id="graficos-impacto" class="my-4">
            <h4>Gráficos de Impacto</h4>
            <div id="grafico-niveles-agua"></div> <!-- Aquí se inicializará el gráfico de ApexCharts -->
          </div>
          
          <!-- Estadísticas Clave -->
          <div id="estadisticas-clave" class="my-4">
            <h4>Estadísticas Clave</h4>
            <p>Porcentaje de disminución en los niveles de agua: <strong>20%</strong></p>
            <!-- Agrega más estadísticas según necesidad -->
          </div>
          
          <!-- Alertas y Notificaciones -->
          <div id="alertas-notificaciones" class="my-4">
            <h4>Alertas y Notificaciones</h4>
            <!-- Contenedor para alertas dinámicas -->
            <div id="alertas-container"></div>
          </div>
          
        </div>
      </main>

      <Footer />
    </div>

    <Scripts path={path} />

    <!-- Scripts para ApexCharts y lógica específica del panel -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js" integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8=" crossorigin="anonymous"></script>
    <script>
      // Aquí puedes incluir la inicialización de gráficos ApexCharts
      // y cualquier otra lógica de JavaScript necesaria para el panel
    </script>
    <script is:inline>
// Gráfico de Líneas para Niveles de Agua a lo largo del tiempo
var opcionesGraficoNivelesAgua = {
  series: [{
    name: "Nivel de Agua",
    data: [30, 40, 35, 50, 49, 60, 70, 91]
  }],
  chart: {
    type: 'line',
    height: 350
  },
  stroke: {
    curve: 'smooth'
  },
  xaxis: {
    categories: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto']
  },
  title: {
    text: 'Niveles de Agua a lo largo del Tiempo',
    align: 'left'
  },
  colors: ['#4a00e0']
};

var graficoNivelesAgua = new ApexCharts(document.querySelector("#grafico-niveles-agua"), opcionesGraficoNivelesAgua);
graficoNivelesAgua.render();

// Gráfico de Barras para Comparación de Recursos Hídricos por Fuente
var opcionesGraficoRecursosHidricos = {
  series: [{
    name: 'Ríos',
    data: [44, 55, 41, 64, 22, 43, 21]
  }, {
    name: 'Embalses',
    data: [53, 32, 33, 52, 13, 44, 32]
  }, {
    name: 'Pozos',
    data: [25, 20, 36, 27, 45, 24, 46]
  }],
  chart: {
    type: 'bar',
    height: 350
  },
  plotOptions: {
    bar: {
      horizontal: false,
      columnWidth: '55%',
      endingShape: 'rounded'
    },
  },
  dataLabels: {
    enabled: false
  },
  stroke: {
    show: true,
    width: 2,
    colors: ['transparent']
  },
  xaxis: {
    categories: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio'],
  },
  title: {
    text: 'Comparación de Recursos Hídricos por Fuente',
    align: 'left'
  },
  colors: ['#008FFB', '#00E396', '#FEB019']
};

var graficoRecursosHidricos = new ApexCharts(document.querySelector("#graficos-impacto"), opcionesGraficoRecursosHidricos);
graficoRecursosHidricos.render();

 const alertas = [
    {
      sector: 'Sector A',
      mensaje: 'Nivel de agua críticamente bajo',
      tipo: 'peligro' // Este podría ser 'peligro', 'advertencia', 'información', etc.
    },
    {
      sector: 'Sector B',
      mensaje: 'Calidad del agua disminuida',
      tipo: 'advertencia'
    }
  ];

  // Función para generar el HTML de las alertas
  function generarHTMLAlerta(alerta) {
    const icono = {
      peligro: '<i class="bi bi-exclamation-triangle-fill"></i>',
      advertencia: '<i class="bi bi-exclamation-circle-fill"></i>',
      informacion: '<i class="bi bi-info-circle-fill"></i>'
    };

    return `
      <div class="alerta ${alerta.tipo}">
        ${icono[alerta.tipo] || ''} 
        <strong>${alerta.sector}:</strong> ${alerta.mensaje}
      </div>
    `;
  }

  // Función para mostrar las alertas en el contenedor
  function mostrarAlertas() {
    const contenedorAlertas = document.getElementById('alertas-container');
    alertas.forEach(alerta => {
      contenedorAlertas.innerHTML += generarHTMLAlerta(alerta);
    });
  }

  // Mostrar las alertas cuando la página esté lista
  document.addEventListener('DOMContentLoaded', mostrarAlertas);
</script>

  </body>
</html>